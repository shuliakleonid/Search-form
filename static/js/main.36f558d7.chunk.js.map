{"version":3,"sources":["hooks.js","components/Conteiner/index.js","components/input/input.js","components/Autocomplete/index.js","pages/home/index.js","components/list-item/index.js","pages/search/search.js","pages/not-found/notFound.js","App.js","index.js"],"names":["useSearch","query","limit","useState","articles","status","error","state","setState","cancelToken","useRef","useEffect","length","current","console","log","cancel","axios","CancelToken","source","get","token","then","response","parseResponse","i","data","push","id","label","catch","isCancel","Error","Container","children","searchValue","setSearchValue","onSearchChange","useCallback","e","target","value","useSearchForm","delay","debounceValue","setDebouncedValue","timer","setTimeout","clearTimeout","useDebounce","Input","placeholder","rest","className","defaultProps","Autocomplete","items","renderInput","inputProps","getItemValue","item","renderMenu","style","href","renderItem","highlighted","backgroundColor","rel","onChange","Home","src","alt","ListItem","Search","search","location","URLSearchParams","map","article","key","NotFound","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.36f558d7.chunk.js","sourcesContent":["import {useCallback, useEffect, useRef, useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const useSearch = (query = '', limit = 10) => {\r\n  const [state, setState] = useState({\r\n    articles: [],\r\n    status: 'IDLE',\r\n    error: ''\r\n  })\r\n\r\n  const cancelToken = useRef(null)\r\n  useEffect(() => {\r\n    if (query.length < 3) {// условие для оптимизации количества запросов, если ввел больше трех букв тогда делать запрос\r\n      return\r\n    }\r\n    if (cancelToken.current) { //отменяет запрос который не загрузился\r\n      console.log('cancel -------------1')\r\n      cancelToken.current.cancel()\r\n    }\r\n    cancelToken.current = axios.CancelToken.source();\r\n    setState({...state, status: 'PENDING'})\r\n    axios.get(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${query}&limit=${limit}`, {\r\n      cancelToken: cancelToken.current.token // добавляем вторым параметром\r\n    })\r\n        .then(function (response) {\r\n          const parseResponse = [];\r\n          for (let i = 0; i < response.data[1].length; i++) {\r\n            parseResponse.push({\r\n              id: response.data[3][i],\r\n              label: response.data[1][i]\r\n            })\r\n          }\r\n          setState({\r\n            articles: parseResponse,\r\n            status: 'SUCCESS',\r\n            error: ''\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          if (axios.isCancel(error)) {\r\n            console.log('request Cancel')\r\n            return\r\n          }\r\n          setState({\r\n            articles: [],\r\n            status: 'ERROR',\r\n            error: error\r\n          });\r\n          if (axios.isCancel(error)) {\r\n            throw new Error('Error')\r\n          }\r\n        })\r\n\r\n  }, [query]);\r\n  return state\r\n}\r\n\r\nexport const useDebounce = (value, delay = 500) => {\r\n  const [debounceValue, setDebouncedValue] = useState(value)\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value)\r\n    }, delay)\r\n    return () => {\r\n      clearTimeout(timer)\r\n    }\r\n  }, [value, delay])\r\n  return debounceValue\r\n}\r\n\r\nexport const useSearchForm = () => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const onSearchChange = useCallback((e) => setSearchValue(e.target.value), []);\r\n  return {\r\n    searchValue,\r\n    onSearchChange\r\n  }\r\n}\r\n","import {useDebounce, useSearch, useSearchForm} from '../../hooks';\r\n\r\nconst Container = ({children}) => {\r\n  const {searchValue, onSearchChange} = useSearchForm();\r\n  const {articles} = useSearch(useDebounce(searchValue));\r\n\r\n  return children({searchValue, onSearchChange, articles})\r\n};\r\n\r\nexport default Container;\r\n","import React from 'react';\r\nimport './style.scss'\r\n\r\nconst Input = ({placeholder, ...rest}) => <input className=\"input-field test\" placeholder={placeholder} {...rest}/>\r\n\r\nInput.defaultProps = {\r\n  placeholder: 'Input search query'\r\n};\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport ReactAutocomplete from 'react-autocomplete'\r\nimport Input from '../input/input';\r\nimport './style.scss'\r\n\r\n\r\nconst Autocomplete = ({articles, searchValue, onSearchChange}) => (\r\n    <ReactAutocomplete\r\n        className=\"autocomplete\"\r\n        items={articles}\r\n        renderInput={Input}\r\n        inputProps={{placeholder: 'Input a search term: '}}\r\n        getItemValue={item => item.label}\r\n        renderMenu={(children, value, style) => {\r\n          return articles && articles.length ?\r\n              (<div style={{...style}} className=\"input-suggestions\">\r\n                    {children}\r\n                    <a href={`/search?query=${value}`} className=\"search-link\">\r\n                      See all results\r\n                    </a>\r\n                  </div>\r\n              ) : <></>;\r\n        }}\r\n        renderItem={(item, highlighted) =>\r\n            <div\r\n                className=\"input-suggestions-item\"\r\n                key={item.id}\r\n                style={{backgroundColor: highlighted ? '#eee' : 'transparent'}}\r\n            >\r\n              <a href={item.id} target=\"_blank\" rel=\"noreferrer\">{item.label}</a>\r\n            </div>\r\n        }\r\n        value={searchValue}\r\n        onChange={onSearchChange}\r\n    />\r\n);\r\n\r\nexport default Autocomplete;\r\n","import React from 'react';\r\nimport Container from '../../components/Conteiner';\r\nimport Autocomplete from '../../components/Autocomplete';\r\nimport './styles.scss'\r\nconst Home = () => {\r\n  return (\r\n      <div className='home-page-container'>\r\n        <img src=\"./google_logo.svg\" alt=\"logo\"/>\r\n      <Container>\r\n        {({ searchValue, onSearchChange, articles })=><Autocomplete onSearchChange={onSearchChange} articles={articles} searchValue={searchValue}/>}\r\n      </Container>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport './style.scss'\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst ListItem = ({id, label}) => {\r\n  return (\r\n      <div className='list-item'>\r\n        <a href={id} target='_blank' rel=\"noreferrer\">{label}</a>\r\n        <p>{id}</p>\r\n      </div>\r\n  );\r\n};\r\nListItem.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired\r\n}\r\n\r\nexport default ListItem;\r\n","import React from 'react';\r\nimport {useSearch} from '../../hooks';\r\nimport Container from '../../components/Conteiner';\r\nimport Autocomplete from '../../components/Autocomplete';\r\nimport ListItem from '../../components/list-item';\r\n\r\nconst Search = ({...props}) => {\r\n  const search = props.location.search\r\n  const params = new URLSearchParams(search);\r\n  const query = params.get('query')\r\n\r\n  const {articles, status} = useSearch(query, 50)\r\n  return (\r\n      <div>\r\n        <Container>\r\n          {({searchValue, onSearchChange, articles}) => <Autocomplete onSearchChange={onSearchChange}\r\n                                                                      articles={articles} searchValue={searchValue}/>}\r\n        </Container>\r\n        {!articles.length && status === 'SUCCESS'\r\n            ? <h3>No articles for query: {query}</h3>\r\n            : articles.map(article => <ListItem {...article} key={article.id}/>\r\n            )}\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React from 'react';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n      <div>\r\n        Page Not Found\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react'\r\nimport {Route, Switch} from 'react-router-dom'\r\nimport Home from './pages/home';\r\nimport Search from './pages/search/search';\r\nimport NotFound from './pages/not-found/notFound';\r\n\r\nconst App = () => (\r\n\r\n    <Switch>\r\n      <Route exact path='/' component={Home}/>\r\n      <Route path='/search' component={Search}/>\r\n      <Route component={NotFound}/>\r\n    </Switch>\r\n\r\n    // <Container>\r\n    //   {({searchValue, onSearchChange, articles})=><Autocomplete articles={articles} searchValue={searchValue} onSearchChange={onSearchChange}/>}\r\n    // </Container>\r\n)\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {BrowserRouter as Router} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n    <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}